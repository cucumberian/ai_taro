<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–±–æ—Ä –∫–∞—Ä—Ç - Taro Telegram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background: #1a1a1a;
            overflow-x: hidden;
        }
        
        .tarot-card {
            width: 80px;
            height: 120px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            position: relative;
        }
        
        .tarot-card.flipped {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .card-front {
            background: linear-gradient(135deg, #2d2d30, #1a1a1a);
            border: 2px solid #d4af37;
        }
        
        .card-back {
            background: linear-gradient(135deg, #d4af37, #ffd700);
            transform: rotateY(180deg);
            border: 2px solid #b8860b;
        }
        
        .card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }
        
        .card-selected {
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            transform: scale(1.05);
        }
        
        .golden-gradient {
            background: linear-gradient(135deg, #d4af37, #ffd700, #b8860b);
        }
        
        .golden-text {
            background: linear-gradient(135deg, #d4af37, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .spread-info {
            background: rgba(45, 45, 48, 0.9);
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Header -->
    <header class="px-4 py-6 text-center fade-in">
        <button onclick="goBack()" class="absolute left-4 top-6 text-gray-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
        </button>
        <h1 class="text-xl font-bold golden-text">–í—ã–±–æ—Ä –∫–∞—Ä—Ç</h1>
        <p class="text-gray-400 text-sm" id="spread-name">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—ã –¥–ª—è —Ä–∞—Å–∫–ª–∞–¥–∞</p>
    </header>
    
    <!-- Spread Info -->
    <div id="spread-info" class="spread-info mx-4 mb-6 rounded-xl p-4 fade-in">
        <div class="flex items-center justify-between mb-2">
            <span class="text-sm text-gray-400">–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–∞—Ç—å:</span>
            <span class="text-sm font-semibold golden-text" id="cards-needed">0</span>
        </div>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-400">–í—ã–±—Ä–∞–Ω–æ:</span>
            <span class="text-sm font-semibold text-white" id="cards-selected">0</span>
        </div>
        <div class="w-full bg-gray-700 rounded-full h-2 mt-3">
            <div id="progress-bar" class="golden-gradient h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
    </div>
    
    <!-- Cards Grid -->
    <main class="px-4 pb-24">
        <div id="cards-container" class="grid grid-cols-4 gap-3 justify-items-center fade-in">
            <!-- Cards will be generated here -->
        </div>
        
        <!-- Selected Cards Display -->
        <div id="selected-cards-display" class="mt-8 hidden">
            <h3 class="text-lg font-semibold text-gray-300 mb-4">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
            <div id="selected-cards-container" class="flex space-x-2 overflow-x-auto pb-4">
                <!-- Selected cards will appear here -->
            </div>
        </div>
        
        <!-- Get Reading Button -->
        <button id="get-reading-btn" class="w-full golden-gradient text-white font-semibold py-4 rounded-xl mt-6 hidden fade-in">
            –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
        </button>
    </main>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 rounded-xl p-6 text-center">
            <div class="w-12 h-12 golden-gradient rounded-full flex items-center justify-center mx-auto mb-4 loading-spinner">
                <span class="text-xl">üîÆ</span>
            </div>
            <p class="text-white font-semibold">–¢–∞—Å—É—é –∫–∞—Ä—Ç—ã...</p>
            <p class="text-gray-400 text-sm">–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—é</p>
        </div>
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 px-4 py-3">
        <div class="flex justify-around items-center">
            <button class="nav-btn flex flex-col items-center space-y-1 text-gray-400" data-page="home">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path>
                </svg>
                <span class="text-xs">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-btn flex flex-col items-center space-y-1 text-golden-400" data-page="cards">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                <span class="text-xs">–ö–∞—Ä—Ç—ã</span>
            </button>
            <button class="nav-btn flex flex-col items-center space-y-1 text-gray-400" data-page="history">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span class="text-xs">–ò—Å—Ç–æ—Ä–∏—è</span>
            </button>
        </div>
    </nav>
    
    <script>
        // Tarot cards data
        const tarotCards = [
            { name: '–®—É—Ç', image: 'https://kimi-web-img.moonshot.cn/img/astromatrix.app/b4f6ec4580fdefa8570ab219f05b0746b8411f8f.jpg', meaning: '–ù–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª' },
            { name: '–ú–∞–≥', image: 'https://kimi-web-img.moonshot.cn/img/i0.wp.com/f0d392a2a121f1f33a434eefb4b89eb29ce4429c.jpg', meaning: '–°–∏–ª–∞ –≤–æ–ª–∏, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, —Å–æ–∑–¥–∞–Ω–∏–µ' },
            { name: '–ñ—Ä–∏—Ü–∞', image: 'https://kimi-web-img.moonshot.cn/img/lilithsattic.com/8bf21401f9bdecfb7786c2fba53ddd46c9364a81.jpg', meaning: '–ò–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã–µ –∑–Ω–∞–Ω–∏—è, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å' },
            { name: '–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞', image: 'https://kimi-web-img.moonshot.cn/img/kajabi-storefronts-production.kajabi-cdn.com/1865697da5ca7641e511f5d7c0ed045ee5ceafb1.jpg', meaning: '–ü–ª–æ–¥–æ—Ä–æ–¥–∏–µ, –∏–∑–æ–±–∏–ª–∏–µ, –º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤–æ' },
            { name: '–ò–º–ø–µ—Ä–∞—Ç–æ—Ä', image: 'https://kimi-web-img.moonshot.cn/img/cdn.shopify.com/fee1fd1f1720a1b155e8077e6fdde2458d452ae4.webp', meaning: '–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å' },
            { name: '–ñ—Ä–µ—Ü', image: 'https://kimi-web-img.moonshot.cn/img/i0.wp.com/ddea5cc9829d8212f8251869e50f48ec8f28621e.jpg', meaning: '–¢—Ä–∞–¥–∏—Ü–∏–∏, –¥—É—Ö–æ–≤–Ω—ã–µ —É—á–µ–Ω–∏—è, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫' },
            { name: '–í–ª—é–±–ª–µ–Ω–Ω—ã–µ', image: 'https://kimi-web-img.moonshot.cn/img/img.freepik.com/9a5165cf3ee16ef839cf11cee25b028113560756.jpg', meaning: '–õ—é–±–æ–≤—å, —Å–æ—é–∑, –≤—ã–±–æ—Ä' },
            { name: '–ö–æ–ª–µ—Å–Ω–∏—Ü–∞', image: 'https://kimi-web-img.moonshot.cn/img/cdn.shopify.com/2bdc2ee21d56102d09ff8aefdc95ee123abd105a.webp', meaning: '–ü–æ–±–µ–¥–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä—ë–¥' },
            { name: '–°–∏–ª–∞', image: 'https://kimi-web-img.moonshot.cn/img/upload.wikimedia.org/eef1b82886f5789b4aede0ce9579db0a678c7f69.png', meaning: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞, –º—É–∂–µ—Å—Ç–≤–æ, —Ç–µ—Ä–ø–µ–Ω–∏–µ' },
            { name: '–û—Ç—à–µ–ª—å–Ω–∏–∫', image: 'https://kimi-web-img.moonshot.cn/img/images.squarespace-cdn.com/0cb8cd510cbd8cc03884d9b13f57f7e68d887675.jpeg', meaning: '–ü–æ–∏—Å–∫, —Å–∞–º–æ—Ä–µ—Ñ–ª–µ–∫—Å–∏—è, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ' },
            { name: '–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã', image: 'https://kimi-web-img.moonshot.cn/img/i.etsystatic.com/e9b9030c7ff091d71e80ac67c6917a138f7759e3.jpg', meaning: '–°—É–¥—å–±–∞, –ø–µ—Ä–µ–º–µ–Ω—ã, —É–¥–∞—á–∞' },
            { name: '–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å', image: 'https://kimi-web-img.moonshot.cn/img/images.squarespace-cdn.com/10c057237550f7a0b77ddd43ef0cc2a393c417ab.jpg', meaning: '–ë–∞–ª–∞–Ω—Å, –ø—Ä–∞–≤–¥–∞, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å' },
            { name: '–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π', image: 'https://kimi-web-img.moonshot.cn/img/m.media-amazon.com/9a2850928fe555cfc20a426a08a14281fb8aa600.jpg', meaning: '–ñ–µ—Ä—Ç–≤–∞, –Ω–æ–≤–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞, –æ–∂–∏–¥–∞–Ω–∏–µ' },
            { name: '–°–º–µ—Ä—Ç—å', image: 'https://kimi-web-img.moonshot.cn/img/thumbs.dreamstime.com/b0738ff6849468e92b16d1cce38f0f1d3dba5b7c.jpg', meaning: '–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ–Ω–µ—Ü, –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ' },
            { name: '–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å', image: 'https://kimi-web-img.moonshot.cn/img/ih1.redbubble.net/fcc131738b36a8d5046260abb26db2b187562171.jpg', meaning: '–ë–∞–ª–∞–Ω—Å, –≥–∞—Ä–º–æ–Ω–∏—è, —Ç–µ—Ä–ø–µ–Ω–∏–µ' },
            { name: '–î—å—è–≤–æ–ª', image: 'https://kimi-web-img.moonshot.cn/img/images.creativemarket.com/52f47112da1aac3bfaa0470046e9113b038d5cec.jpg', meaning: '–ò—Å–∫—É—à–µ–Ω–∏–µ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è' },
            { name: '–ë–∞—à–Ω—è', image: 'https://kimi-web-img.moonshot.cn/img/i.etsystatic.com/2ecc1e57a2e021319d17e37761d2b35b0202f0c0.jpg', meaning: '–†–∞–∑—Ä—É—à–µ–Ω–∏–µ, –≤–Ω–µ–∑–∞–ø–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ' },
            { name: '–ó–≤–µ–∑–¥–∞', image: 'https://kimi-web-img.moonshot.cn/img/as2.ftcdn.net/5269100d3ae4114bfc742f610a82d66b88397001.jpg', meaning: '–ù–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ' },
            { name: '–õ—É–Ω–∞', image: 'https://kimi-web-img.moonshot.cn/img/mjdorian.com/11c9e4299d484b17d36f9e484a26cf95165e52c2.jpg', meaning: '–ò–ª–ª—é–∑–∏—è, –∏–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã' },
            { name: '–°–æ–ª–Ω—Ü–µ', image: 'https://kimi-web-img.moonshot.cn/img/i.redd.it/eccbebad8e53fd3240c2078abc05517cff155cca.jpg', meaning: '–†–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, —è—Å–Ω–æ—Å—Ç—å' },
            { name: '–°—É–¥', image: 'https://kimi-web-img.moonshot.cn/img/lilithsattic.com/afa210b722b1cd285f8465c24f387e840d921ad5.jpg', meaning: '–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ, –ø—Ä–æ—â–µ–Ω–∏–µ, –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ' },
            { name: '–ú–∏—Ä', image: 'https://kimi-web-img.moonshot.cn/img/ionagrant.com/2024f2040c9e7e1e5377ea93bfffdb373c2f2632.jpg', meaning: '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å' }
        ];
        
        // Spread configurations
        const spreads = {
            single: { name: '–ö–∞—Ä—Ç–∞ –¥–Ω—è', cards: 1 },
            celtic: { name: '–ö–µ–ª—å—Ç—Å–∫–∏–π –∫—Ä–µ—Å—Ç', cards: 10 },
            love: { name: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', cards: 6 },
            career: { name: '–ö–∞—Ä—å–µ—Ä–∞', cards: 7 }
        };
        
        let selectedSpread = localStorage.getItem('selectedSpread') || 'single';
        let selectedCards = [];
        let currentSpread = spreads[selectedSpread];
        
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            generateCards();
            setupEventListeners();
            
            // Animate elements
            anime({
                targets: '.fade-in',
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 800,
                delay: anime.stagger(100)
            });
        });
        
        function initializePage() {
            document.getElementById('spread-name').textContent = currentSpread.name;
            document.getElementById('cards-needed').textContent = currentSpread.cards;
        }
        
        function generateCards() {
            const container = document.getElementById('cards-container');
            const shuffledCards = [...tarotCards].sort(() => Math.random() - 0.5);
            
            container.innerHTML = '';
            
            for (let i = 0; i < 22; i++) {
                const cardElement = document.createElement('div');
                cardElement.className = 'tarot-card';
                cardElement.dataset.cardIndex = i;
                cardElement.dataset.cardId = shuffledCards[i].name;
                
                cardElement.innerHTML = `
                    <div class="card-front">
                        <div class="w-full h-full golden-gradient rounded-lg flex items-center justify-center">
                            <span class="text-2xl">‚ú®</span>
                        </div>
                    </div>
                    <div class="card-back">
                        <img src="${shuffledCards[i].image}" alt="${shuffledCards[i].name}" class="rounded-lg">
                    </div>
                `;
                
                container.appendChild(cardElement);
            }
        }
        
        function setupEventListeners() {
            document.querySelectorAll('.tarot-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectCard(this);
                });
            });
            
            document.getElementById('get-reading-btn').addEventListener('click', function() {
                getReading();
            });
            
            // Navigation handlers
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const page = this.dataset.page;
                    navigateToPage(page);
                });
            });
        }
        
        function selectCard(cardElement) {
            if (selectedCards.length >= currentSpread.cards) {
                showMessage('–í—ã —É–∂–µ –≤—ã–±—Ä–∞–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–∞—Ä—Ç');
                return;
            }
            
            if (cardElement.classList.contains('flipped')) {
                return; // Card already selected
            }
            
            // Flip card animation
            anime({
                targets: cardElement,
                rotateY: 180,
                duration: 600,
                easing: 'easeInOutQuad',
                complete: function() {
                    cardElement.classList.add('flipped', 'card-selected');
                }
            });
            
            // Add card to selected
            const cardName = cardElement.dataset.cardId;
            const cardData = tarotCards.find(card => card.name === cardName);
            selectedCards.push(cardData);
            
            updateProgress();
            updateSelectedCardsDisplay();
        }
        
        function updateProgress() {
            const selected = selectedCards.length;
            const needed = currentSpread.cards;
            const progress = (selected / needed) * 100;
            
            document.getElementById('cards-selected').textContent = selected;
            document.getElementById('progress-bar').style.width = progress + '%';
            
            if (selected === needed) {
                document.getElementById('get-reading-btn').classList.remove('hidden');
                anime({
                    targets: '#get-reading-btn',
                    opacity: [0, 1],
                    translateY: [20, 0],
                    duration: 500
                });
            }
        }
        
        function updateSelectedCardsDisplay() {
            const container = document.getElementById('selected-cards-display');
            const cardsContainer = document.getElementById('selected-cards-container');
            
            if (selectedCards.length > 0) {
                container.classList.remove('hidden');
                
                cardsContainer.innerHTML = '';
                selectedCards.forEach((card, index) => {
                    const cardElement = document.createElement('div');
                    cardElement.className = 'flex-shrink-0 w-16 h-24 rounded-lg overflow-hidden';
                    cardElement.innerHTML = `
                        <img src="${card.image}" alt="${card.name}" class="w-full h-full object-cover">
                        <p class="text-xs text-center mt-1 text-gray-400">${card.name}</p>
                    `;
                    cardsContainer.appendChild(cardElement);
                });
            }
        }
        
        function getReading() {
            // Show loading
            document.getElementById('loading-overlay').classList.remove('hidden');
            
            // Save reading data
            const readingData = {
                spreadType: selectedSpread,
                spreadName: currentSpread.name,
                cards: selectedCards,
                date: new Date().toISOString()
            };
            
            localStorage.setItem('currentReading', JSON.stringify(readingData));
            
            // Save to history
            const history = JSON.parse(localStorage.getItem('taroHistory') || '[]');
            history.unshift(readingData);
            if (history.length > 10) history.pop(); // Keep only last 10
            localStorage.setItem('taroHistory', JSON.stringify(history));
            
            // Navigate to reading page after delay
            setTimeout(() => {
                window.location.href = 'reading.html';
            }, 2000);
        }
        
        function showMessage(message) {
            // Simple toast message
            const toast = document.createElement('div');
            toast.className = 'fixed top-20 left-4 right-4 bg-gray-800 text-white p-3 rounded-lg z-50';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            anime({
                targets: toast,
                opacity: [0, 1],
                translateY: [-20, 0],
                duration: 300,
                complete: function() {
                    setTimeout(() => {
                        anime({
                            targets: toast,
                            opacity: 0,
                            translateY: -20,
                            duration: 300,
                            complete: function() {
                                document.body.removeChild(toast);
                            }
                        });
                    }, 2000);
                }
            });
        }
        
        function navigateToPage(page) {
            switch(page) {
                case 'home':
                    window.location.href = 'index.html';
                    break;
                case 'cards':
                    // Already on cards page
                    break;
                case 'history':
                    window.location.href = 'history.html';
                    break;
            }
        }
        
        function goBack() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>